<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Snake Game</title>
  <link rel="icon" href="Logo Snake.jpg" type="image/png">

  <style>
    :root {
      --bg: #0f172a;
      --panel: #111827;
      --accent: #22c55e;
      --food: #f59e0b;
      --text: #e5e7eb;
      --grid: rgba(255,255,255,.04);
    }
    * { box-sizing: border-box; }
    body {
      margin: 0;
      font-family: system-ui, sans-serif;
      background: linear-gradient(135deg, #0c111b, #1a2130);
      color: var(--text);
      display: flex;
      justify-content: center;
      align-items: center;
      min-height: 100vh;
      padding: 20px;
    }

    .container {
      width: 100%;
      max-width: 500px;
      text-align: center;
    }

    header {
      display: flex;
      justify-content: space-between;
      gap: 12px;
      margin-bottom: 16px;
      font-weight: 600;
    }

    .score {
      background: rgba(17, 24, 39, 0.8);
      backdrop-filter: blur(10px);
      color: white;
      padding: 10px 14px;
      border-radius: 12px;
      font-weight: bold;
      min-width: 90px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.2);
    }

    .board {
      position: relative;
      background: rgba(17, 24, 39, 0.6);
      border-radius: 16px;
      padding: 16px;
      box-shadow: 0 20px 50px rgba(0,0,0,0.4);
      backdrop-filter: blur(10px);
      border: 1px solid rgba(255,255,255,0.08);
    }

    canvas {
      display: block;
      width: 100%;
      height: auto;
      border-radius: 12px;
      box-shadow: inset 0 0 0 1px rgba(255,255,255,0.06);
    }

    .overlay {
      position: absolute;
      inset: 16px;
      background: rgba(2, 4, 13, 0.9);
      backdrop-filter: blur(8px);
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      border-radius: 12px;
      color: white;
      padding: 20px;
      text-align: center;
      display: none;
      animation: fadeIn 0.3s ease;
    }

    @keyframes fadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }

    .overlay h2 {
      margin: 0 0 8px;
      color: var(--food);
      font-size: 1.5rem;
    }

    .overlay p {
      margin: 0 0 16px;
      font-size: 1.1rem;
    }

    .overlay button {
      padding: 10px 24px;
      background: var(--accent);
      color: white;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      font-weight: bold;
      font-size: 1rem;
      transition: transform 0.1s, background 0.2s;
    }

    .overlay button:hover {
      background: #1e9e4e;
      transform: scale(1.05);
    }

    .controls {
      margin-top: 16px;
      font-size: 0.9rem;
      opacity: 0.8;
      line-height: 1.4;
    }

    .controls strong {
      background: rgba(255,255,255,0.1);
      padding: 2px 6px;
      border-radius: 4px;
    }
  </style>
</head>
<body>
  <div class="container">
    <header>
      <div class="score">Skor: <span id="score">0</span></div>
      <div class="score">Terbaik: <span id="best">0</span></div>
    </header>

    <div class="board">
      <canvas id="game" width="360" height="360"></canvas>
      <div class="overlay" id="gameOver">
        <h2>Game Over!</h2>
        <p>Skor akhir: <span id="final-score">0</span></p>
        <button id="restart">Main Lagi</button>
      </div>
    </div>

    <div class="controls">
      Gunakan <strong>↑ ← ↓ →</strong> atau <strong>WASD</strong>.<br>
      Tekan <strong>Spasi</strong> untuk pause.
    </div>
  </div>

  <script>
    const canvas = document.getElementById('game');
    const ctx = canvas.getContext('2d');
    const scoreEl = document.getElementById('score');
    const bestEl = document.getElementById('best');
    const gameOverOverlay = document.getElementById('gameOver');
    const finalScoreEl = document.getElementById('final-score');
    const restartBtn = document.getElementById('restart');

    // Ubah ukuran grid: 15x15 (lebih proporsional)
    const CELL = 24;
    const COLS = Math.floor(canvas.width / CELL); // 15
    const ROWS = Math.floor(canvas.height / CELL); // 15

    // Warna
    const snakeHead = '#22c55e';
    const snakeBody = '#16a34a';
    const foodColor = '#f59e0b';

    let snake = [{ x: 7, y: 7 }];
    let dir = { x: 1, y: 0 };
    let nextDir = { x: 1, y: 0 };
    let food = { x: 10, y: 10 };
    let score = 0;
    let best = parseInt(localStorage.getItem('snake-best')) || 0;
    let paused = false;
    let gameOver = false;

    // Update UI
    scoreEl.textContent = score;
    bestEl.textContent = best;

    function reset() {
      snake = [{ x: Math.floor(COLS / 2), y: Math.floor(ROWS / 2) }];
      dir = { x: 1, y: 0 };
      nextDir = { x: 1, y: 0 };
      score = 0;
      scoreEl.textContent = score;
      gameOver = false;
      paused = false;
      spawnFood();
      hideGameOver();
      draw();
    }

    function saveBest() {
      if (score > best) {
        best = score;
        bestEl.textContent = best;
        localStorage.setItem('snake-best', best);
      }
    }

    function spawnFood() {
      let pos;
      do {
        pos = {
          x: Math.floor(Math.random() * COLS),
          y: Math.floor(Math.random() * ROWS)
        };
      } while (snake.some(s => s.x === pos.x && s.y === pos.y));
      food = pos;
    }

    function draw() {
      // Clear canvas
      ctx.clearRect(0, 0, canvas.width, canvas.height);

      // Background grid (halus)
      ctx.strokeStyle = 'rgba(255,255,255,0.03)';
      for (let x = 0; x <= COLS; x++) {
        ctx.beginPath();
        ctx.moveTo(x * CELL, 0);
        ctx.lineTo(x * CELL, canvas.height);
        ctx.stroke();
      }
      for (let y = 0; y <= ROWS; y++) {
        ctx.beginPath();
        ctx.moveTo(0, y * CELL);
        ctx.lineTo(canvas.width, y * CELL);
        ctx.stroke();
      }

      // Food dengan glow dan animasi
      ctx.shadowColor = foodColor;
      ctx.shadowBlur = 12;
      ctx.fillStyle = foodColor;
      ctx.beginPath();
      ctx.arc(
        food.x * CELL + CELL / 2,
        food.y * CELL + CELL / 2,
        CELL / 2 - 6,
        0, Math.PI * 2
      );
      ctx.fill();
      ctx.shadowBlur = 0;

      // Snake dengan bayangan halus
      snake.forEach((seg, i) => {
        const color = i === 0 ? snakeHead : snakeBody;
        ctx.fillStyle = color;

        // Bayangan
        ctx.shadowColor = 'rgba(0,0,0,0.3)';
        ctx.shadowBlur = 6;
        ctx.fillRect(seg.x * CELL + 3, seg.y * CELL + 3, CELL - 6, CELL - 6);
        ctx.shadowBlur = 0;

        // Highlight kecil (efek 3D)
        ctx.fillStyle = i === 0 ? '#4ade80' : '#22c55e';
        ctx.fillRect(seg.x * CELL + 5, seg.y * CELL + 5, CELL - 10, CELL - 10);
      });
    }

    function step() {
      if (paused || gameOver) return;

      // Update arah
      if ((nextDir.x !== -dir.x) || (nextDir.y !== -dir.y)) {
        dir = nextDir;
      }

      const head = {
        x: (snake[0].x + dir.x + COLS) % COLS,
        y: (snake[0].y + dir.y + ROWS) % ROWS
      };

      // Tabrak tubuh sendiri
      if (snake.some(s => s.x === head.x && s.y === head.y)) {
        endGame();
        return;
      }

      snake.unshift(head);

      // Makan
      if (head.x === food.x && head.y === food.y) {
        score += 10;
        scoreEl.textContent = score;
        saveBest();
        spawnFood();
      } else {
        snake.pop();
      }

      draw();
    }

    function endGame() {
      gameOver = true;
      finalScoreEl.textContent = score;
      showGameOver();
    }

    function showGameOver() {
      gameOverOverlay.style.display = 'flex';
    }

    function hideGameOver() {
      gameOverOverlay.style.display = 'none';
    }

    // Input
    document.addEventListener('keydown', e => {
      const key = e.key.toLowerCase();
      if (['arrowleft', 'a'].includes(key)) nextDir = { x: -1, y: 0 };
      if (['arrowright', 'd'].includes(key)) nextDir = { x: 1, y: 0 };
      if (['arrowup', 'w'].includes(key)) nextDir = { x: 0, y: -1 };
      if (['arrowdown', 's'].includes(key)) nextDir = { x: 0, y: 1 };
      if (key === ' ') {
        paused = !paused;
      }
    });

    restartBtn.addEventListener('click', reset);

    // Game loop
    function loop() {
      if (!gameOver) {
        step();
      }
      setTimeout(loop, 150);
    }

    reset();
    loop();
  </script>
</body>
</html>